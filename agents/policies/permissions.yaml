version: 1
notes: |
  Guardrails and tool permissions for NGI Agents. Default-deny; allow minimal tools per agent.

global:
  allow_network: false
  allow_shell: false
  redact_patterns:
    - "(?i)(api[_-]?key|secret|token|password|passwd|credential|private_key)[^\n]*"
  sensitive_paths:
    - ".env"
    - ".env.*"
    - "**/node_modules/**"
    - "**/.next/**"
    - "**/.git/**"
  allowed_licenses:
    - MIT
    - Apache-2.0
    - BSD-2-Clause
    - BSD-3-Clause

agents:
  software_manager:
    mcp_tools:
      - sequential-thinking
      - memory
      - fetch: { mode: read_only }
    can_call_agents: [code_engineer, uiux_engineer, testing_engineer, docs_writer, security_engineer]

  code_engineer:
    filesystem:
      read: ["./"]
      write:
        - "src/**"
        - "apps/**"
        - "packages/ui/**"
        - "MarkdownFiles/**"
        - "agents/**"
    mcp_tools:
      - filesystem
      - fetch: { mode: read_only }
    allow_network: false

  uiux_engineer:
    filesystem:
      read: ["apps/desktop/**", "packages/ui/**", "MarkdownFiles/**"]
      write: ["apps/desktop/**", "packages/ui/**", "MarkdownFiles/**"]
    mcp_tools:
      - filesystem
      - fetch: { mode: read_only }

  testing_engineer:
    filesystem:
      read: ["./"]
      write: [
        "apps/desktop/src/**/__tests__/**",
        "apps/desktop/src/**/*.test.tsx",
        "tests/**",
        "e2e/tests/**"
      ]
    mcp_tools:
      - filesystem
      - fetch: { mode: read_only }
    allow_running_tests: false  # tests run in CI, not by agent

  docs_writer:
    filesystem:
      read: ["./"]
      write: ["MarkdownFiles/**", "README.md", "agents/**"]
    mcp_tools:
      - filesystem

  security_engineer:
    filesystem:
      read: ["./"]
      write: []
    mcp_tools:
      - snyk
      - filesystem
      - fetch: { mode: read_only }

